/*! For license information please see trakt.js.LICENSE.txt */
(()=>{var e={7314:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function a(e,t,r){return e.concat(t).map((function(e){return n(e,r)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function i(e,t){try{return t in e}catch(e){return!1}}function s(e,r,u){(u=u||{}).arrayMerge=u.arrayMerge||a,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=n;var c=Array.isArray(r);return c===Array.isArray(e)?c?u.arrayMerge(e,r,u):function(e,t,r){var a={};return r.isMergeableObject(e)&&o(e).forEach((function(t){a[t]=n(e[t],r)})),o(t).forEach((function(o){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(i(e,o)&&r.isMergeableObject(t[o])?a[o]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(o,r)(e[o],t[o],r):a[o]=n(t[o],r))})),a}(e,r,u):n(r,u)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return s(e,r,t)}),{})};var u=s;e.exports=u},3773:function(e,t){var r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const a=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},o=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,n,a)=>r.call(n,e,...a)});let s=Function.call.bind(Object.prototype.hasOwnProperty);const u=(e,t={},r={})=>{let n=Object.create(null),c={has:(t,r)=>r in e||r in n,get(c,l,f){if(l in n)return n[l];if(!(l in e))return;let g=e[l];if("function"==typeof g)if("function"==typeof t[l])g=i(e,e[l],t[l]);else if(s(r,l)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((o,i)=>{if(t.fallbackToNoCallback)try{r[e](...n,a({resolve:o,reject:i},t))}catch(a){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(r[e](...n),o()):r[e](...n,a({resolve:o,reject:i},t))}))})(l,r[l]);g=i(e,e[l],t)}else g=g.bind(e);else if("object"==typeof g&&null!==g&&(s(t,l)||s(r,l)))g=u(g,t[l],r[l]);else{if(!s(r,"*"))return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(t){e[l]=t}}),g;g=u(g,t[l],r["*"])}return n[l]=g,g},set:(t,r,a,o)=>(r in n?n[r]=a:e[r]=a,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},l=Object.create(e);return new Proxy(l,c)},c=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),l=new n((e=>"function"!=typeof e?e:function(t){const r=u(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)})),f=new n((e=>"function"!=typeof e?e:function(t,r,n){let a,o,i=!1,s=new Promise((e=>{a=function(t){i=!0,e(t)}}));try{o=e(t,r,a)}catch(e){o=Promise.reject(e)}const u=!0!==o&&((c=o)&&"object"==typeof c&&"function"==typeof c.then);var c;if(!0!==o&&!u&&!i)return!1;return(u?o:s).then((e=>{n(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),g=({reject:r,resolve:n},a)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?r(new Error(a.message)):n(a)},d=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const a=g.bind(null,{resolve:e,reject:t});n.push(a),r.sendMessage(...n)}))},h={devtools:{network:{onRequestFinished:c(l)}},runtime:{onMessage:c(f),onMessageExternal:c(f),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},m={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":m},services:{"*":m},websites:{"*":m}},u(e,h,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(n=r.apply(t,[e]))||(e.exports=n)},7562:(e,t,r)=>{var n=r(537).default;function a(){"use strict";e.exports=a=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,i=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function g(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{g({},"")}catch(t){g=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof w?t:w,o=Object.create(a.prototype),i=new _(n||[]);return s(o,"_invoke",{value:P(e,r,i)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var m="suspendedStart",p="suspendedYield",v="executing",b="completed",y={};function w(){}function A(){}function x(){}var k={};g(k,c,(function(){return this}));var T=Object.getPrototypeOf,S=T&&T(T(L([])));S&&S!==o&&i.call(S,c)&&(k=S);var O=x.prototype=w.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){g(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var a;s(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var a=m;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var u=R(s,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var c=h(e,r,n);if("normal"===c.type){if(a=n.done?b:p,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=b,n.method="throw",n.arg=c.arg)}}}function R(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(i.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(n(e)+" is not iterable")}return A.prototype=x,s(O,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:A,configurable:!0}),A.displayName=g(x,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,g(e,f,"GeneratorFunction")),e.prototype=Object.create(O),e},r.awrap=function(e){return{__await:e}},C(E.prototype),g(E.prototype,l,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,n,a,o){void 0===o&&(o=Promise);var i=new E(d(e,t,n,a),o);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(O),g(O,f,"Generator"),g(O,c,(function(){return this})),g(O,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;M(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},537:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8281:(e,t,r)=>{var n=r(7562)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(a,o){var i=t.apply(r,n);function s(t){e(i,a,o,s,u,"next",t)}function u(t){e(i,a,o,s,u,"throw",t)}s(void 0)}))}}var n=r(8281),a=r.n(n);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(m())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var a=new(e.bind.apply(e,n));return r&&d(a,r.prototype),a}(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},p(e)}function v(e,t,r){return t=g(t),f(e,b()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var y=function(e){function t(e){var r;return o(this,t),l(r=v(this,t,[JSON.stringify(e)]),"request",void 0),l(r,"status",void 0),l(r,"text",void 0),l(r,"isCanceled",void 0),l(r,"extra",void 0),r.request=e.request,r.status=e.status,r.text=e.text,r.isCanceled=e.isCanceled,r.extra=e.extra,r}return h(t,e),c(t)}(p(Error)),w=r(3773),A=r.n(w),x=A()?A().runtime.getURL("/").split("-")[0]:"unknown",k=function(){},T=new Promise((function(e){return k=e})),S={DATABASE_URL:"https://uts.rafaelgomes.xyz/api",environment:"MISSING_ENV_VAR".REACT_ENV||"",clientId:"8f23e12295b68916fa3e32dc50abeff06f8bf619fbdfae4c9890fb1eeb2e1fc2",clientSecret:"9e84df7581846e6cc18047ee236bd90fdb9148f2f8083a0373cf00b693841975",rollbarToken:"c1669aa5383f4f3dbbeb005d4f597335",tmdbApiKey:"6e4336a930d0fb6d9f6a6a91aa6f1a04",manifestVersion:A().runtime.getManifest().manifest_version,browser:{moz:"firefox",chrome:"chrome",unknown:"unknown"}[x]||"unknown",pageType:"content",tabId:null,dateFormat:"EEE d MMM yyyy, H:mm:ss",storage:{},errors:{},events:{},functionsToInject:{},waitForInit:function(){return T},finishInit:function(){return k(null)}},O=new(function(){return c((function e(){o(this,e),l(this,"instance",3===S.manifestVersion?A().storage.session:A().storage.local)}),[{key:"set",value:(e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.instance.set(t));case 1:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"get",value:function(){var e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.instance.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]);var e}());function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?P(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var j=new(function(){return c((function e(){var t=this;o(this,e),l(this,"messageHandlers",{"dispatch-event":function(e){return S.events.dispatch(e.eventType,e.eventSpecifier,e.data,!0)}}),l(this,"onTabRemoved",(function(e){O.get("injectedContentScriptTabs").then((function(t){var r;new Set(null!==(r=t.injectedContentScriptTabs)&&void 0!==r?r:[]).has(e)&&S.events.dispatch("CONTENT_SCRIPT_DISCONNECT",null,{tabId:e})}))})),l(this,"onMessage",(function(e,r){var n,a,o=t.messageHandlers[e.action];if(void 0!==o){var i=o(e,null!==(n=null===(a=r.tab)||void 0===a?void 0:a.id)&&void 0!==n?n:null);return void 0===i?void 0:Promise.resolve(i).catch((function(e){if(S.errors.log("Failed to execute action.",e),e instanceof y)throw new Error(JSON.stringify({instance:"RequestError",data:{request:e.request,status:e.status,text:e.text,isCanceled:e.isCanceled,extra:e.extra}}));throw new Error(JSON.stringify({instance:"Error",data:{message:e.message}}))}))}}))}),[{key:"init",value:function(){"content"===S.pageType&&this.toExtension({action:"connect-content-script"})}},{key:"addListeners",value:function(){"background"!==S.pageType||A().tabs.onRemoved.hasListener(this.onTabRemoved)||A().tabs.onRemoved.addListener(this.onTabRemoved),A().runtime.onMessage.addListener(this.onMessage)}},{key:"connectContentScript",value:(e=t(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r){e.next=3;break}return e.next=3,S.events.dispatch("CONTENT_SCRIPT_CONNECT",null,{tabId:r});case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})},{key:"addHandlers",value:function(e){this.messageHandlers=R(R({},this.messageHandlers),e)}},{key:"toExtension",value:function(){var e=t(a().mark((function e(t){var r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,A().runtime.sendMessage(t);case 4:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=8;break}e.t0=void 0!==n;case 8:if(!e.t0){e.next=12;break}e.t2=n,e.next=13;break;case 12:e.t2=null;case 13:r=e.t2,e.next=31;break;case 16:if(e.prev=16,e.t3=e.catch(1),!(e.t3 instanceof Error)){e.next=31;break}e.prev=19,o=JSON.parse(e.t3.message),e.next=26;break;case 23:throw e.prev=23,e.t4=e.catch(19),e.t3;case 26:e.t5=o.instance,e.next="Error"===e.t5?29:"RequestError"===e.t5?30:31;break;case 29:throw new Error(o.data.message);case 30:throw new y(o.data);case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,null,[[1,16],[19,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"toContent",value:function(){var e=t(a().mark((function e(t,r){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().tabs.sendMessage(r,t);case 2:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==n;case 6:if(!e.t0){e.next=10;break}e.t2=n,e.next=11;break;case 10:e.t2=null;case 11:return o=e.t2,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"toAllContent",value:function(){var e=t(a().mark((function e(t){var r,n,o,i,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("background"===S.pageType){e.next=2;break}return e.abrupt("return",this.toExtension({action:"send-to-all-content",message:t}));case 2:return e.next=4,O.get("injectedContentScriptTabs");case 4:n=e.sent,o=new Set(null!==(r=n.injectedContentScriptTabs)&&void 0!==r?r:[]),i=C(o),e.prev=7,i.s();case 9:if((s=i.n()).done){e.next=15;break}return u=s.value,e.next=13,this.toContent(t,u);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[7,17,20,23]])})));return function(){return e.apply(this,arguments)}}()}]);var e}());function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=new Map;function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var N=new(function(){return c((function e(){var t=this;o(this,e),l(this,"abortControllers",new Map),l(this,"onStorageOptionsChange",(function(e){e.options&&"grantCookies"in e.options&&t.checkWebRequestListener()})),l(this,"onBeforeSendHeaders",(function(e){var t=e.requestHeaders;if(t){var r=t.find((function(e){return"uts-cookie"===e.name.toLowerCase()}));if(r)return t=t.filter((function(e){return"cookie"!==e.name.toLowerCase()})),r.name="Cookie",{requestHeaders:t}}})),l(this,"onTabRemoved",(function(e){t.cancelTabRequests(e)})),l(this,"onRequestsCancel",(function(e){t.cancelRequests(null===e.tabId?e.key:"".concat(e.tabId,"_").concat(e.key))}))}),[{key:"init",value:function(){"background"===S.pageType&&(this.checkWebRequestListener(),this.checkTabListener(),S.events.subscribe("STORAGE_OPTIONS_CHANGE",null,this.onStorageOptionsChange)),S.events.subscribe("REQUESTS_CANCEL",null,this.onRequestsCancel)}},{key:"checkWebRequestListener",value:function(){if(A().webRequest){var e=S.storage.options.grantCookies;if(e&&!A().webRequest.onBeforeSendHeaders.hasListener(this.onBeforeSendHeaders)){var t={types:["xmlhttprequest"],urls:["*://*.trakt.tv/*"].concat(U(Array.from(I.values()).map((function(e){return e.hostPatterns})).flat()))};A().webRequest.onBeforeSendHeaders.addListener(this.onBeforeSendHeaders,t,["blocking","requestHeaders"])}else!e&&A().webRequest.onBeforeSendHeaders.hasListener(this.onBeforeSendHeaders)&&A().webRequest.onBeforeSendHeaders.removeListener(this.onBeforeSendHeaders)}}},{key:"checkTabListener",value:function(){A().tabs.onRemoved.hasListener(this.onTabRemoved)||A().tabs.onRemoved.addListener(this.onTabRemoved)}},{key:"cancelRequests",value:function(e){var t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))}},{key:"cancelTabRequests",value:function(e){var t,r=U(this.abortControllers.entries()).filter((function(t){return L(t,1)[0].startsWith("".concat(e,"_"))})),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(n.s();!(t=n.n()).done;){var a=L(t.value,2),o=a[0];a[1].abort(),this.abortControllers.delete(o)}}catch(e){n.e(e)}finally{n.f()}}}])}());function q(){function e(t,r,a){var o=RegExp(t,r);return n.set(o,a||n.get(t)),d(o,e.prototype)}function t(e,t){var r=n.get(t);return Object.keys(r).reduce((function(t,n){var a=r[n];if("number"==typeof a)t[n]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[n]=e[a[o]]}return t}),Object.create(null))}q=function(t,r){return new e(t,void 0,r)};var r=RegExp.prototype,n=new WeakMap;return h(e,RegExp),e.prototype.exec=function(e){var n=r.exec.call(this,e);if(n){n.groups=t(n,this);var a=n.indices;a&&(a.groups=t(a,this))}return n},e.prototype[Symbol.replace]=function(e,a){if("string"==typeof a){var o=n.get(this);return r[Symbol.replace].call(this,e,a.replace(/\$<([^>]+)>/g,(function(e,t){var r=o[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof a){var s=this;return r[Symbol.replace].call(this,e,(function(){var e=arguments;return"object"!=i(e[e.length-1])&&(e=[].slice.call(e)).push(t(e,s)),a.apply(this,e)}))}return r[Symbol.replace].call(this,e,a)},q.apply(this,arguments)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?W(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var F=new(function(){return c((function e(){o(this,e),l(this,"withHeaders",{})}),[{key:"send",value:(e=t(a().mark((function e(t){var r,n=this,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<o.length&&void 0!==o[1]?o[1]:S.tabId,e.abrupt("return",new Promise((function(e,a){"background"===S.pageType?n.sendDirectly(t,r,e,a):(t.withHeaders=n.withHeaders,j.toExtension({action:"send-request",request:t}).then(e).catch(a))})));case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})},{key:"sendDirectly",value:function(){var e=t(a().mark((function e(t){var r,n,o,s,u,c,l,f,g,d,h,m,p=this,v=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<v.length&&void 0!==v[1]?v[1]:S.tabId,n=2<v.length?v[2]:void 0,o=3<v.length?v[3]:void 0,s=0,u="",e.prev=5,e.next=8,this.fetch(t,r);case 8:return c=e.sent,s=c.status,e.next=12,c.text();case 12:if(u=e.sent,429!==s){e.next=19;break}if(!(l=c.headers.get("Retry-After"))){e.next=19;break}return f=1e3*Number.parseInt(l),setTimeout((function(){p.sendDirectly(t,r,n,o)}),f),e.abrupt("return");case 19:if(!(200>s||400<=s)){e.next=21;break}throw u;case 21:e.next=29;break;case 23:e.prev=23,e.t0=e.catch(5),h=-1,m=void 0,"object"===i(e.t0)&&e.t0&&"response"in e.t0&&"object"===i(e.t0.response)&&e.t0.response&&("status"in e.t0.response&&(h=e.t0.response.status),"data"in e.t0.response&&(m=e.t0.response.data)),o(new y({request:t,status:h,text:m,isCanceled:null!==(g=null===(d=t.signal)||void 0===d?void 0:d.aborted)&&void 0!==g&&g}));case 29:n(u);case 30:case"end":return e.stop()}}),e,this,[[5,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t(a().mark((function e(t){var r,n,o,i,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<s.length&&void 0!==s[1]?s[1]:S.tabId,e.next=3,this.getOptions(t,n);case 3:return o=e.sent,i="".concat(null===n?"":"".concat(n,"_")).concat(t.cancelKey||"default"),N.abortControllers.has(i)||N.abortControllers.set(i,new AbortController),t.signal=null===(r=N.abortControllers.get(i))||void 0===r?void 0:r.signal,e.abrupt("return",fetch(t.url,{method:o.method,headers:o.headers,body:o.body,signal:t.signal}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}())},{key:"getOptions",value:function(){var e=t(a().mark((function e(t){var r,n=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<n.length&&void 0!==n[1]?n[1]:S.tabId,e.t0=t.method,e.next=4,this.getHeaders(t,r);case 4:return e.t1=e.sent,e.t2="string"==typeof t.body?t.body:JSON.stringify(t.body),e.abrupt("return",{method:e.t0,headers:e.t1,body:e.t2});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeaders",value:function(){var e=t(a().mark((function e(t){var r,n,o,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1<i.length&&void 0!==i[1]?i[1]:S.tabId,n=H(H(H({},this.withHeaders),t.withHeaders||{}),{},{"Content-Type":"string"==typeof t.body?"application/x-www-form-urlencoded":"application/json"},t.headers||{}),e.next=4,this.getCookies(t,r);case 4:return(o=e.sent)&&(n["UTS-Cookie"]=o),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCookies",value:function(){var e=t(a().mark((function e(t){var r,n,o,i,s,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=1<u.length&&void 0!==u[1]?u[1]:S.tabId)){e.next=3;break}return e.abrupt("return");case 3:if(S.storage.options.grantCookies&&A().cookies&&A().webRequest){e.next=5;break}return e.abrupt("return");case 5:if(null!=(n=q(/https?:\/\/(?:www\.)?(.+?)(?:\/.*)?$/,{domain:1}).exec(t.url))&&n.groups){e.next=8;break}return e.abrupt("return");case 8:return o=n.groups.domain,e.next=11,A().tabs.get(r);case 11:return i=e.sent,e.next=14,A().cookies.getAll({domain:o,storeId:i.cookieStoreId});case 14:return s=e.sent,e.abrupt("return",s.map((function(e){return"".concat(e.name,"=").concat(e.value)})).join("; "));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]);var e}()),Y=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:F;return new Proxy(t,{get:function(r,n,a){return"withHeaders"===n?H(H({},t.withHeaders),e):Reflect.get(r,n,a)}})},B=function(){return c((function e(){o(this,e),l(this,"API_VERSION",void 0),l(this,"HOST_URL",void 0),l(this,"API_URL",void 0),l(this,"AUTHORIZE_URL",void 0),l(this,"REDIRECT_URL",void 0),l(this,"REQUEST_TOKEN_URL",void 0),l(this,"REVOKE_TOKEN_URL",void 0),l(this,"SEARCH_URL",void 0),l(this,"SHOWS_URL",void 0),l(this,"SCROBBLE_URL",void 0),l(this,"SYNC_URL",void 0),l(this,"SETTINGS_URL",void 0),l(this,"requests",F),l(this,"isActivated",!1),this.API_VERSION="2",this.HOST_URL="https://trakt.tv",this.API_URL="https://api.trakt.tv",this.AUTHORIZE_URL="".concat(this.HOST_URL,"/oauth/authorize"),this.REDIRECT_URL="".concat(this.HOST_URL,"/apps"),this.REQUEST_TOKEN_URL="".concat(this.API_URL,"/oauth/token"),this.REVOKE_TOKEN_URL="".concat(this.API_URL,"/oauth/revoke"),this.SEARCH_URL="".concat(this.API_URL,"/search"),this.SHOWS_URL="".concat(this.API_URL,"/shows"),this.SCROBBLE_URL="".concat(this.API_URL,"/scrobble"),this.SYNC_URL="".concat(this.API_URL,"/sync/history"),this.SETTINGS_URL="".concat(this.API_URL,"/users/settings")}),[{key:"activate",value:(e=t(a().mark((function e(){var t,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isActivated){e.next=2;break}return e.abrupt("return");case 2:return r={"trakt-api-key":S.clientId,"trakt-api-version":this.API_VERSION},e.next=5,S.storage.get("auth");case 5:n=e.sent,null!==(t=n.auth)&&void 0!==t&&t.access_token&&(r.Authorization="Bearer ".concat(n.auth.access_token)),this.requests=Y(r,this.requests),this.isActivated=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e}();function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?G(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var $=new(function(){return c((function e(){o(this,e)}),[{key:"open",value:(e=t(a().mark((function e(t){var r,n,o,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=1<i.length&&void 0!==i[1]?i[1]:{},"content"!==S.pageType){e.next=3;break}return e.abrupt("return",j.toExtension({action:"open-tab",url:t,extraProperties:r}));case 3:return e.next=5,A().tabs.query({active:!0,currentWindow:!0});case 5:if(0!==(n=e.sent).length){e.next=8;break}return e.abrupt("return",null);case 8:return o=z({index:n[0].index+1,url:t},r),S.storage.options.grantCookies&&A().cookies&&(o.cookieStoreId=n[0].cookieStoreId),e.abrupt("return",A().tabs.create(o));case 11:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}]);var e}());function Q(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function J(e){Q(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function V(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function X(e){Q(1,arguments);var t=J(e),r=t.getUTCDay(),n=(r<1?7:0)+r-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function K(e){Q(1,arguments);var t=J(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=X(n),o=new Date(0);o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0);var i=X(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}var Z={};function ee(){return Z}function te(e,t){var r,n,a,o,i,s,u,c;Q(1,arguments);var l=ee(),f=V(null!==(r=null!==(n=null!==(a=null!==(o=null==t?void 0:t.weekStartsOn)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==n?n:null===(u=l.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=J(e),d=g.getUTCDay(),h=(d<f?7:0)+d-f;return g.setUTCDate(g.getUTCDate()-h),g.setUTCHours(0,0,0,0),g}function re(e,t){var r,n,a,o,i,s,u,c;Q(1,arguments);var l=J(e),f=l.getUTCFullYear(),g=ee(),d=V(null!==(r=null!==(n=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==a?a:g.firstWeekContainsDate)&&void 0!==n?n:null===(u=g.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(f+1,0,d),h.setUTCHours(0,0,0,0);var m=te(h,t),p=new Date(0);p.setUTCFullYear(f,0,d),p.setUTCHours(0,0,0,0);var v=te(p,t);return l.getTime()>=m.getTime()?f+1:l.getTime()>=v.getTime()?f:f-1}function ne(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}const ae=function(e,t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return ne("yy"===t?n%100:n,t.length)},oe=function(e,t){var r=e.getUTCMonth();return"M"===t?String(r+1):ne(r+1,2)},ie=function(e,t){return ne(e.getUTCDate(),t.length)},se=function(e,t){return ne(e.getUTCHours()%12||12,t.length)},ue=function(e,t){return ne(e.getUTCHours(),t.length)},ce=function(e,t){return ne(e.getUTCMinutes(),t.length)},le=function(e,t){return ne(e.getUTCSeconds(),t.length)},fe=function(e,t){var r=t.length,n=e.getUTCMilliseconds();return ne(Math.floor(n*Math.pow(10,r-3)),t.length)};var ge={G:function(e,t,r){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getUTCFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ae(e,t)},Y:function(e,t,r,n){var a=re(e,n),o=a>0?a:1-a;return"YY"===t?ne(o%100,2):"Yo"===t?r.ordinalNumber(o,{unit:"year"}):ne(o,t.length)},R:function(e,t){return ne(K(e),t.length)},u:function(e,t){return ne(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ne(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ne(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return oe(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return ne(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var a=function(e,t){Q(1,arguments);var r=J(e),n=te(r,t).getTime()-function(e,t){var r,n,a,o,i,s,u,c;Q(1,arguments);var l=ee(),f=V(null!==(r=null!==(n=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t||null===(i=t.locale)||void 0===i||null===(s=i.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==n?n:null===(u=l.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==r?r:1),g=re(e,t),d=new Date(0);return d.setUTCFullYear(g,0,f),d.setUTCHours(0,0,0,0),te(d,t)}(r,t).getTime();return Math.round(n/6048e5)+1}(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):ne(a,t.length)},I:function(e,t,r){var n=function(e){Q(1,arguments);var t=J(e),r=X(t).getTime()-function(e){Q(1,arguments);var t=K(e),r=new Date(0);return r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0),X(r)}(t).getTime();return Math.round(r/6048e5)+1}(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):ne(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ie(e,t)},D:function(e,t,r){var n=function(e){Q(1,arguments);var t=J(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=r-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):ne(n,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var a=e.getUTCDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ne(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var a=e.getUTCDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ne(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return ne(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,a=e.getUTCHours();switch(n=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,a=e.getUTCHours();switch(n=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return se(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ue(e,t)},K:function(e,t,r){var n=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):ne(n,t.length)},k:function(e,t,r){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):ne(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ce(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):le(e,t)},S:function(e,t){return fe(e,t)},X:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return he(a);case"XXXX":case"XX":return me(a);default:return me(a,":")}},x:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return he(a);case"xxxx":case"xx":return me(a);default:return me(a,":")}},O:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+de(a,":");default:return"GMT"+me(a,":")}},z:function(e,t,r,n){var a=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+de(a,":");default:return"GMT"+me(a,":")}},t:function(e,t,r,n){var a=n._originalDate||e;return ne(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,r,n){return ne((n._originalDate||e).getTime(),t.length)}};function de(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),o=n%60;if(0===o)return r+String(a);var i=t||"";return r+String(a)+i+ne(o,2)}function he(e,t){return e%60==0?(e>0?"-":"+")+ne(Math.abs(e)/60,2):me(e,t)}function me(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e);return n+ne(Math.floor(a/60),2)+r+ne(a%60,2)}const pe=ge;var ve=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},be=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ye={p:be,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return ve(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",ve(a,t)).replace("{{time}}",be(o,t))}};const we=ye;var Ae=["D","DD"],xe=["YY","YYYY"];function ke(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Te={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Se(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Oe,Ce={date:Se({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Se({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Se({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Pe(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=null!=r&&r.width?String(r.width):a;n=e.formattingValues[o]||e.formattingValues[a]}else{var i=e.defaultWidth,s=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[i]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Re(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;var i,s=o[0],u=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?function(e,t){for(var r=0;r<e.length;r++)if(e[r].test(s))return r}(u):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&e[r].test(s))return r}(u);return i=e.valueCallback?e.valueCallback(c):c,{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(s.length)}}}const je={code:"en-US",formatDistance:function(e,t,r){var n,a=Te[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:Ce,formatRelative:function(e,t,r,n){return Ee[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Pe({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Pe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Pe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Pe({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Pe({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Oe={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(Oe.matchPattern);if(!r)return null;var n=r[0],a=e.match(Oe.parsePattern);if(!a)return null;var o=Oe.valueCallback?Oe.valueCallback(a[0]):a[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(n.length)}}),era:Re({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Re({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Re({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Re({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Re({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Me=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Le=/^'([^]*?)'?$/,Ue=/''/g,Ie=/[a-zA-Z]/;function De(e,t,r){var n,a,o,s,u,c,l,f,g,d,h,m,p,v,b,y,w,A;Q(2,arguments);var x=String(t),k=ee(),T=null!==(n=null!==(a=null==r?void 0:r.locale)&&void 0!==a?a:k.locale)&&void 0!==n?n:je,S=V(null!==(o=null!==(s=null!==(u=null!==(c=null==r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null==r||null===(l=r.locale)||void 0===l||null===(f=l.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==u?u:k.firstWeekContainsDate)&&void 0!==s?s:null===(g=k.locale)||void 0===g||null===(d=g.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=V(null!==(h=null!==(m=null!==(p=null!==(v=null==r?void 0:r.weekStartsOn)&&void 0!==v?v:null==r||null===(b=r.locale)||void 0===b||null===(y=b.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==p?p:k.weekStartsOn)&&void 0!==m?m:null===(w=k.locale)||void 0===w||null===(A=w.options)||void 0===A?void 0:A.weekStartsOn)&&void 0!==h?h:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var C=J(e);if(!function(e){if(Q(1,arguments),!function(e){return Q(1,arguments),e instanceof Date||"object"===i(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=J(e);return!isNaN(Number(t))}(C))throw new RangeError("Invalid time value");var E=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(C),P=function(e,t){return Q(2,arguments),function(e,t){Q(2,arguments);var r=J(e).getTime(),n=V(t);return new Date(r+n)}(e,-V(t))}(C,E),R={firstWeekContainsDate:S,weekStartsOn:O,locale:T,_originalDate:C};return x.match(_e).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,we[t])(e,T.formatLong):e})).join("").match(Me).map((function(n){if("''"===n)return"'";var a,o,i=n[0];if("'"===i)return(o=(a=n).match(Le))?o[1].replace(Ue,"'"):a;var s,u=pe[i];if(u)return null!=r&&r.useAdditionalWeekYearTokens||(s=n,-1===xe.indexOf(s))||ke(n,t,String(e)),null!=r&&r.useAdditionalDayOfYearTokens||!function(e){return-1!==Ae.indexOf(e)}(n)||ke(n,t,String(e)),u(P,n,T.localize,R);if(i.match(Ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return n})).join("")}var Ne=r(7314),qe=r.n(Ne);function We(){function e(t,r,a){var o=RegExp(t,r);return n.set(o,a||n.get(t)),d(o,e.prototype)}function t(e,t){var r=n.get(t);return Object.keys(r).reduce((function(t,n){var a=r[n];if("number"==typeof a)t[n]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[n]=e[a[o]]}return t}),Object.create(null))}We=function(t,r){return new e(t,void 0,r)};var r=RegExp.prototype,n=new WeakMap;return h(e,RegExp),e.prototype.exec=function(e){var n=r.exec.call(this,e);if(n){n.groups=t(n,this);var a=n.indices;a&&(a.groups=t(a,this))}return n},e.prototype[Symbol.replace]=function(e,a){if("string"==typeof a){var o=n.get(this);return r[Symbol.replace].call(this,e,a.replace(/\$<([^>]+)>/g,(function(e,t){var r=o[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof a){var s=this;return r[Symbol.replace].call(this,e,(function(){var e=arguments;return"object"!=i(e[e.length-1])&&(e=[].slice.call(e)).push(t(e,s)),a.apply(this,e)}))}return r[Symbol.replace].call(this,e,a)},We.apply(this,arguments)}var He=new(function(){return c((function e(){o(this,e)}),[{key:"dateDiff",value:function(e,t,r){var n=this.unix(e),a=this.unix(t);return Math.abs(n-a)<=r}},{key:"timestamp",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:S.dateFormat;return De(void 0===e?new Date:"string"==typeof e?new Date(e):"number"==typeof e?1e10<=e?new Date(e):new Date(1e3*e):e,t)}},{key:"unix",value:function(e){var t;if(void 0===e)t=Math.trunc(Date.now()/1e3);else if("string"==typeof e){var r=new Date(e);t=Math.trunc(r.getTime()/1e3)}else t="number"==typeof e?1e10<=e?Math.trunc(e/1e3):Math.trunc(e):Math.trunc(e.getTime()/1e3);return t}},{key:"convertToISOString",value:function(e){return e?new Date(1e3*e).toISOString():void 0}},{key:"mergeObjs",value:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return qe().all([e].concat(r))}},{key:"replace",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:We(/\{(.+?)\}/g,{placeholder:1});return e.replace(r,(function(e,r){return t[r]}))}}])}());function Fe(e,t,r){return t=g(t),f(e,Ye()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Be=new(function(e){function r(){var e;return o(this,r),l(e=Fe(this,r),"isIdentityAvailable",void 0),l(e,"manualAuth",void 0),e.isIdentityAvailable=!!A().identity,e.manualAuth={},e}return h(r,e),c(r,[{key:"requiresCookies",value:function(){return"firefox"===S.browser&&!!S.storage.options.grantCookies}},{key:"getAuthorizeUrl",value:function(){return"".concat(this.AUTHORIZE_URL,"?response_type=code&client_id=").concat(S.clientId,"&redirect_uri=").concat(this.getRedirectUrl())}},{key:"getRedirectUrl",value:function(){return this.isIdentityAvailable&&!this.requiresCookies()?A().identity.getRedirectURL():this.REDIRECT_URL}},{key:"getCode",value:function(e){return e.split("?")[1].split("=")[1]}},{key:"hasTokenExpired",value:function(e){var t=He.unix();return e.created_at+e.expires_in<t}},{key:"authorize",value:function(){var e=this;return this.isIdentityAvailable&&!this.requiresCookies()?this.startIdentityAuth():new Promise((function(t){e.startManualAuth(t)}))}},{key:"startIdentityAuth",value:function(){var e=t(a().mark((function e(){var t,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A().identity.launchWebAuthFlow({url:this.getAuthorizeUrl(),interactive:!0});case 3:return t=e.sent,e.abrupt("return",this.getToken(t));case 7:return e.prev=7,e.t0=e.catch(0),this.isIdentityAvailable=!1,e.abrupt("return",new Promise((function(e){r.startManualAuth(e)})));case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"startManualAuth",value:function(){var e=t(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.manualAuth.callback=t,e.next=3,$.open(this.getAuthorizeUrl());case 3:(r=e.sent)&&(this.manualAuth.tabId=r.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finishManualAuth",value:function(){var e=t(a().mark((function e(t){var r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.manualAuth.tabId){e.next=3;break}return e.next=3,A().tabs.remove(this.manualAuth.tabId);case 3:return e.next=5,this.getToken(t);case 5:o=e.sent,null===(r=(n=this.manualAuth).callback)||void 0===r||r.call(n,o),this.manualAuth={};case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getToken",value:function(e){return this.requestToken({code:this.getCode(e),client_id:S.clientId,client_secret:S.clientSecret,redirect_uri:this.getRedirectUrl(),grant_type:"authorization_code"})}},{key:"refreshToken",value:function(e){return this.requestToken({refresh_token:e,client_id:S.clientId,client_secret:S.clientSecret,redirect_uri:this.getRedirectUrl(),grant_type:"refresh_token"})}},{key:"requestToken",value:function(){var e=t(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.activate();case 3:return e.next=5,this.requests.send({url:this.REQUEST_TOKEN_URL,method:"POST",body:t});case 5:return n=e.sent,r=JSON.parse(n),e.next=9,S.storage.set({auth:r},!0);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,S.storage.remove("auth",!0);case 15:throw e.t0;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"revokeToken",value:function(){var e=t(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.storage.get("auth");case 2:return r=e.sent,e.next=5,this.activate();case 5:return e.next=7,this.requests.send({url:this.REVOKE_TOKEN_URL,method:"POST",body:{access_token:null===(t=r.auth)||void 0===t?void 0:t.access_token,client_id:S.clientId,client_secret:S.clientSecret}});case 7:return e.next=9,S.storage.remove("auth",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateToken",value:function(){var e=t(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("background"===S.pageType){e.next=2;break}return e.abrupt("return",j.toExtension({action:"validate-trakt-token"}));case 2:return t=null,e.next=5,S.storage.get("auth");case 5:if(!(r=e.sent).auth){e.next=14;break}if(!r.auth.refresh_token||!this.hasTokenExpired(r.auth)){e.next=13;break}return e.next=10,this.refreshToken(r.auth.refresh_token);case 10:t=e.sent,e.next=14;break;case 13:t=r.auth;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])}(B)),Ge=new(function(){return c((function e(){o(this,e),l(this,"isLoggedIn",void 0),this.isLoggedIn=!1}),[{key:"checkLogin",value:(e=t(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.validateToken();case 3:if(!(t=e.sent)||!t.access_token){e.next=10;break}return this.isLoggedIn=!0,e.next=8,S.events.dispatch("LOGIN_SUCCESS",null,{auth:t});case 8:e.next=11;break;case 10:throw new Error(JSON.stringify(t));case 11:e.next=19;break;case 13:if(e.prev=13,e.t0=e.catch(0),this.isLoggedIn=!1,!S.errors.validate(e.t0)){e.next=19;break}return e.next=19,S.events.dispatch("LOGIN_ERROR",null,{error:e.t0});case 19:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return e.apply(this,arguments)})},{key:"login",value:function(){var e=t(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.toExtension({action:"login"});case 3:if(!(t=e.sent)||!t.access_token){e.next=10;break}return this.isLoggedIn=!0,e.next=8,S.events.dispatch("LOGIN_SUCCESS",null,{auth:t});case 8:e.next=11;break;case 10:throw new Error(JSON.stringify(t));case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(0),this.isLoggedIn=!1,!S.errors.validate(e.t0)){e.next=20;break}return S.errors.error("Failed to log in.",e.t0),e.next=20,S.events.dispatch("LOGIN_ERROR",null,{error:e.t0});case 20:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.toExtension({action:"logout"});case 3:return this.isLoggedIn=!1,e.next=6,S.events.dispatch("LOGOUT_SUCCESS",null,{});case 6:e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(0),this.isLoggedIn=!0,!S.errors.validate(e.t0)){e.next=15;break}return S.errors.error("Failed to log out.",e.t0),e.next=15,S.events.dispatch("LOGOUT_ERROR",null,{error:e.t0});case 15:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"finishLogin",value:function(){var e=t(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.location.search).includes("code")){e.next=4;break}return e.next=4,j.toExtension({action:"finish-login",redirectUrl:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]);var e}());!function(){var e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.finishLogin();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})()})();