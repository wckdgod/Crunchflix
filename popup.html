<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUNCHFLIX</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>

    <!-- Auth Section (Disconnected) -->
    <div id="auth-section">
        <h2>CRUNCHFLIX</h2>
        <div class="status" id="status">Not connected to Trakt</div>
        <button id="connectBtn">Connect to Trakt</button>
        <button id="settingsBtn" class="secondary-btn">Configure API Keys</button>
    </div>

    <!-- Code Display Section -->
    <div id="code-section" class="hidden">
        <p>1. Visit <a href="#" id="verificationUrl" target="_blank" rel="noopener noreferrer">trakt.tv/activate</a></p>
        <p class="step-label">2. Enter Code:</p>
        <h3 id="userCode">...</h3>
        <div class="status">Waiting for authorization...</div>
    </div>

    <!-- Connected UI -->
    <div id="connected-section" class="hidden">

        <!-- Full-Bleed Poster Card -->
        <div class="poster-card">
            <!-- Full-bleed poster image -->
            <img id="np-image" class="poster-full" src="" alt="">
            <!-- Gradient overlay so text is readable -->
            <div class="poster-overlay"></div>
            <!-- Metadata overlaid on top -->
            <div class="poster-meta">
                <div id="np-title" class="title">Nothing Playing</div>
                <div class="meta-row">
                    <span id="np-status" class="status-badge stopped">Ready</span>
                    <span id="meta-rating" class="meta-rating"></span>
                    <span id="meta-runtime" class="meta-runtime"></span>
                    <span id="meta-certification" class="meta-badge"></span>
                </div>
                <div id="meta-genres" class="genre-row"></div>
                <!-- Synopsis inside overlay, only shown if available -->
                <p id="np-synopsis" class="synopsis hidden"></p>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button id="fixMatchBtn">Wrong Show? Fix Match</button>

            <!-- Fix Match Modal -->
            <div id="fix-section" class="hidden">
                <p class="label">Paste Trakt URL or ID:</p>
                <input type="text" id="fixInput" placeholder="e.g. sentenced-to-be-a-hero">
                <div class="btn-row">
                    <button id="fixSaveBtn">Save</button>
                    <button id="fixCancelBtn">Cancel</button>
                </div>
                <div id="fix-status"></div>
            </div>

            <button id="disconnectBtn">Disconnect</button>
        </div>
    </div>

    <script src="popup.js"></script>
</body>

</html>